{"version":3,"sources":["../../../src/resources/votes/routes.js"],"names":["post","requireAuth","req","res","next","body","poll","selection","Vote","create","then","vote","json","catch","get","id","params","Poll","findById","results"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;;;eAEe,uBACZA,IADY,CACP,kBADO,EACaC,oBADb,EAC0B,UAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AAAA,kBAC7BF,GAAG,CAACG,IADyB;AAAA,MACjDC,IADiD,aACjDA,IADiD;AAAA,MAC3CC,SAD2C,aAC3CA,SAD2C;;AAEzDC,iBAAKC,MAAL,CAAY;AAAEH,IAAAA,IAAI,EAAJA,IAAF;AAAQC,IAAAA,SAAS,EAATA;AAAR,GAAZ,EACGG,IADH,CACQ,UAAAC,IAAI;AAAA,WAAIR,GAAG,CAACS,IAAJ,CAASD,IAAT,CAAJ;AAAA,GADZ,EAEGE,KAFH,CAEST,IAFT;AAGD,CANY,EAQZU,GARY,CAQR,oBARQ,EAQc,UAACZ,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AAAA,MACrCW,EADqC,GAC9Bb,GAAG,CAACc,MAD0B,CACrCD,EADqC;;AAE7CE,kBAAKC,QAAL,CAAcH,EAAd,EACGL,IADH,CACQ,UAAAJ,IAAI;AAAA,WAAIA,IAAI,CAACa,OAAL,EAAJ;AAAA,GADZ,EAEGT,IAFH,CAEQ,UAAAS,OAAO;AAAA,WAAIhB,GAAG,CAACS,IAAJ,CAASO,OAAT,CAAJ;AAAA,GAFf,EAGGN,KAHH,CAGST,IAHT;AAID,CAdY,C","sourcesContent":["import { Router } from 'express';\nimport Vote from './model';\nimport Poll from '../polls/model';\nimport requireAuth from '../../middleware/requireAuth';\n\nexport default Router()\n  .post('/polls/:id/votes', requireAuth, (req, res, next) => {\n    const { poll, selection } = req.body;\n    Vote.create({ poll, selection })\n      .then(vote => res.json(vote))\n      .catch(next);\n  })\n\n  .get('/polls/:id/results', (req, res, next) => {\n    const { id } = req.params;\n    Poll.findById(id)\n      .then(poll => poll.results())\n      .then(results => res.json(results))\n      .catch(next);\n  });\n"],"file":"routes.js"}